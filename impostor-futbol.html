<!DOCTYPE html>
<html lang="es">
<head>

<meta charset="UTF-8">

<!-- CONFIG MOVIL -->
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<meta name="theme-color" content="#0f172a">

<title>El Impostor Futbolero</title>

<style>

/* ===== APP MOBILE BASE ===== */

html,body{
    height:100%;
    margin:0;
    overflow:hidden;
    touch-action:manipulation;
    font-family:Arial, Helvetica, sans-serif;
    background:#0f172a;
    color:white;
}

body{
    display:flex;
    flex-direction:column;
    text-align:center;
}

h1{
    background:#111827;
    padding:15px;
    margin:0;
    font-size:clamp(20px,5vw,28px);
}

h2{
    font-size:clamp(18px,4.5vw,24px);
}

/* ===== CONTENEDORES ===== */

.container{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding:20px;
}

/* ===== TRANSICION PANTALLAS ===== */

.pantalla{
    opacity:0;
    transform:translateY(20px);
    transition:all .4s ease;
    pointer-events:none;
}

.pantalla.activa{
    opacity:1;
    transform:translateY(0);
    pointer-events:auto;
}

/* ===== INPUTS ===== */

select,input{
    width:85%;
    max-width:320px;
    padding:14px;
    font-size:18px;
    border-radius:12px;
    border:none;
    margin:8px;
}

/* ===== BOTONES ===== */

button{
    background:#22c55e;
    color:white;
    border:none;
    border-radius:14px;
    font-size:18px;
    padding:16px;
    width:85%;
    max-width:320px;
    margin:10px auto;
    transition:.2s;
}

button:active{
    transform:scale(.96);
}

/* ===== BOTONES JUGADORES ===== */

@keyframes aparecerJugador{
    from{opacity:0;transform:translateX(-30px);}
    to{opacity:1;transform:translateX(0);}
}

.playerBtn{
    background:#3b82f6;
    font-size:20px;
    padding:18px;
    width:90%;
    animation:aparecerJugador .4s ease forwards;
}

/* ===== PANTALLA ROL ===== */

#pantallaRol{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:#020617;
    display:none;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    font-size:28px;
    padding:20px;
}

@keyframes revelarRol{
    0%{transform:scale(.7);opacity:0;}
    60%{transform:scale(1.1);}
    100%{transform:scale(1);opacity:1;}
}

#textoRol{
    animation:revelarRol .4s ease;
}

/* ===== TIMER ===== */

#timer{
    font-size:52px;
    margin-top:20px;
    color:#22c55e;
    animation:pulse 1s infinite;
}

@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.05);}
    100%{transform:scale(1);}
}

</style>
</head>

<body>

<h1>‚öΩ El Impostor Futbolero</h1>

<!-- CONFIG -->
<div class="container pantalla activa" id="configuracion">

<h2>Configuraci√≥n</h2>

<select id="categoria">
<option value="futbolistas">Adivinar Futbolista</option>
<option value="equipos">Adivinar Equipo</option>
<option value="leyendas">Adivinar Leyenda</option>
<option value="selecciones">Adivinar Selecci√≥n</option>
</select>

<input type="number" id="numJugadores" value="4" min="3" max="12" placeholder="Jugadores">
<input type="number" id="numImpostores" value="1" min="1" placeholder="Impostores">

<button onclick="crearInputsNombres()">Configurar nombres</button>

<div id="nombresContainer"></div>

<button onclick="iniciarJuego()">Jugar</button>

</div>

<!-- JUEGO -->
<div class="container pantalla" id="pantallaJuego">
<h2>Pas√° el celular y toc√° tu nombre</h2>
<div id="jugadores"></div>
<button id="btnEmpezar" style="display:none;" onclick="empezarRonda()">‚ñ∂ Empezar ronda</button>
</div>

<!-- ROL -->
<div id="pantallaRol">
<div id="textoRol"></div>
<br>
<button onclick="cerrarRol()">Cerrar</button>
</div>

<!-- TIMER -->
<div class="container pantalla" id="pantallaTimer">
<h2>Tiempo de discusi√≥n</h2>
<div id="timer">05:00</div>
</div>

<script>

/* ===== BASE DATOS ===== */

const categorias={
futbolistas:["Messi","Cristiano Ronaldo","Neymar","Mbapp√©","Haaland","Vinicius Jr","Salah","Bellingham"],
equipos:["Barcelona","Real Madrid","Liverpool","Manchester City","Pe√±arol","Nacional","PSG","Bayern Munich"],
leyendas:["Pel√©","Maradona","Zidane","Cruyff","Ronaldinho","Ronaldo Nazario"],
selecciones:["Argentina","Brasil","Uruguay","Francia","Espa√±a","Alemania","Italia"]
};

let categoriaElegida;
let cantidadJugadores;
let cantidadImpostores;
let palabraSecreta;
let roles=[];
let nombres=[];
let yaVieron=[];

/* ===== CAMBIO PANTALLAS ===== */

function cambiarPantalla(actual,siguiente){
    document.getElementById(actual).classList.remove("activa");
    document.getElementById(siguiente).classList.add("activa");
}

/* ===== NOMBRES ===== */

function crearInputsNombres(){
    cantidadJugadores=parseInt(numJugadores.value);
    nombresContainer.innerHTML="<h3>Nombres:</h3>";

    for(let i=0;i<cantidadJugadores;i++){
        nombresContainer.innerHTML+=`<input placeholder="Jugador ${i+1}" id="nombre${i}">`;
    }
}

/* ===== LOGICA ===== */

function elegirPalabra(){
    const lista=categorias[categoriaElegida];
    palabraSecreta=lista[Math.floor(Math.random()*lista.length)];
}

function asignarRoles(){
    roles=new Array(cantidadJugadores).fill("jugador");

    let asignados=0;
    while(asignados<cantidadImpostores){
        let r=Math.floor(Math.random()*cantidadJugadores);
        if(roles[r]!=="impostor"){
            roles[r]="impostor";
            asignados++;
        }
    }
}

function crearBotonesJugadores(){
    jugadores.innerHTML="";
    yaVieron=new Array(cantidadJugadores).fill(false);

    for(let i=0;i<cantidadJugadores;i++){
        let btn=document.createElement("button");
        btn.className="playerBtn";
        btn.textContent=nombres[i];
        btn.style.animationDelay=(i*0.1)+"s";
        btn.onclick=()=>mostrarRol(i,btn);
        jugadores.appendChild(btn);
    }
}

function iniciarJuego(){

    categoriaElegida=categoria.value;
    cantidadJugadores=parseInt(numJugadores.value);
    cantidadImpostores=parseInt(numImpostores.value);

    if(cantidadImpostores>=cantidadJugadores){
        alert("Demasiados impostores");
        return;
    }

    nombres=[];
    for(let i=0;i<cantidadJugadores;i++){
        nombres.push(document.getElementById("nombre"+i)?.value || `Jugador ${i+1}`);
    }

    elegirPalabra();
    asignarRoles();
    crearBotonesJugadores();

    cambiarPantalla("configuracion","pantallaJuego");
}

/* ===== ROL ===== */

function mostrarRol(indice,boton){

    if(yaVieron[indice]) return;

    textoRol.style.animation="none";
    textoRol.offsetHeight;
    textoRol.style.animation=null;

    textoRol.innerHTML =
        roles[indice]==="impostor"
        ? "ü§´ SOS EL IMPOSTOR"
        : `‚öΩ Palabra:<br><b>${palabraSecreta}</b>`;

    yaVieron[indice]=true;
    boton.style.visibility="hidden";

    pantallaRol.style.display="flex";

    if(yaVieron.every(v=>v)){
        btnEmpezar.style.display="block";
    }
}

function cerrarRol(){
    pantallaRol.style.display="none";
}

/* ===== TIMER ===== */

function empezarRonda(){

    cambiarPantalla("pantallaJuego","pantallaTimer");

    let tiempo=300;

    const intervalo=setInterval(()=>{
        let min=Math.floor(tiempo/60);
        let seg=tiempo%60;

        timer.textContent=
            String(min).padStart(2,"0")+":"+
            String(seg).padStart(2,"0");

        tiempo--;

        if(tiempo<0){
            clearInterval(intervalo);
            timer.textContent="‚è∞ Tiempo terminado";
        }

    },1000);
}

/* Truco fullscreen mobile */
window.scrollTo(0,1);

</script>

</body>
</html>